{% extends 'base.html' %}
{% load static %}

{% block title %}文檔分析{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row">
        <!-- 下載統計 -->
        <div class="col-md-6 mb-4">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">下載統計</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card bg-primary text-white mb-3">
                                <div class="card-body">
                                    <h6 class="card-title">保險文檔</h6>
                                    <p class="card-text">
                                        總數：{{ download_stats.insurance.total }}<br>
                                        下載：{{ download_stats.insurance.downloads }}
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card bg-success text-white">
                                <div class="card-body">
                                    <h6 class="card-title">投資文檔</h6>
                                    <p class="card-text">
                                        總數：{{ download_stats.investment.total }}<br>
                                        下載：{{ download_stats.investment.downloads }}
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 分類統計 -->
        <div class="col-md-6 mb-4">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">分類統計</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h6>保險文檔</h6>
                            <ul class="list-group">
                                {% for stat in category_stats.insurance %}
                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                    {{ stat.category }}
                                    <span class="badge bg-primary rounded-pill">{{ stat.count }}</span>
                                </li>
                                {% endfor %}
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h6>投資文檔</h6>
                            <ul class="list-group">
                                {% for stat in category_stats.investment %}
                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                    {{ stat.category }}
                                    <span class="badge bg-success rounded-pill">{{ stat.count }}</span>
                                </li>
                                {% endfor %}
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 標籤統計 -->
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">標籤統計</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        {% for tag in tag_stats %}
                        <div class="col-md-3 mb-3">
                            <div class="card">
                                <div class="card-body">
                                    <h6 class="card-title">{{ tag.name }}</h6>
                                    <p class="card-text">
                                        文檔數：{{ tag.doc_count }}<br>
                                        下載數：{{ tag.download_count }}
                                    </p>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %} 